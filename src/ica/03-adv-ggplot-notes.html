<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>3 Advanced Data Viz – COMP/STAT212 Portfolio</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../src/ica/04-adv-maps-1-notes.html" rel="next">
<link href="../../src/ica/cleaning.html" rel="prev">
<script src="../../site_libs/cookie-consent/cookie-consent.js"></script>
<link href="../../site_libs/cookie-consent/cookie-consent.css" rel="stylesheet">
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark-2fef5ea3f8957b3e4ecc936fc74692ca.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" class="quarto-color-scheme-extra" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-b6165e882820e9cbe81d0573c00a9ad9.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark-336fc07c9e36db0483797e7526239151.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<link href="../../site_libs/bootstrap/bootstrap-b6165e882820e9cbe81d0573c00a9ad9.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme-extra" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script><script type="text/javascript" charset="UTF-8">
document.addEventListener('DOMContentLoaded', function () {
cookieconsent.run({
  "notice_banner_type":"simple",
  "consent_type":"implied",
  "palette":"light",
  "language":"en",
  "page_load_consent_levels":["strictly-necessary","functionality","tracking","targeting"],
  "notice_banner_reject_button_hide":false,
  "preferences_center_close_button_hide":false,
  "website_name":""
  ,
"language":"en"
  });
});
</script><style>html{ scroll-behavior: smooth; }</style>
<link rel="stylesheet" href="../../style/custom.css">
</head>
<body class="nav-sidebar docked quarto-light"><script id="quarto-html-before-body" type="application/javascript">
    const toggleBodyColorMode = (bsSheetEl) => {
      const mode = bsSheetEl.getAttribute("data-mode");
      const bodyEl = window.document.querySelector("body");
      if (mode === "dark") {
        bodyEl.classList.add("quarto-dark");
        bodyEl.classList.remove("quarto-light");
      } else {
        bodyEl.classList.add("quarto-light");
        bodyEl.classList.remove("quarto-dark");
      }
    }
    const toggleBodyColorPrimary = () => {
      const bsSheetEl = window.document.querySelector("link#quarto-bootstrap:not([rel=disabled-stylesheet])");
      if (bsSheetEl) {
        toggleBodyColorMode(bsSheetEl);
      }
    }
    const setColorSchemeToggle = (alternate) => {
      const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
      for (let i=0; i < toggles.length; i++) {
        const toggle = toggles[i];
        if (toggle) {
          if (alternate) {
            toggle.classList.add("alternate");
          } else {
            toggle.classList.remove("alternate");
          }
        }
      }
    };
    const toggleColorMode = (alternate) => {
      // Switch the stylesheets
      const primaryStylesheets = window.document.querySelectorAll('link.quarto-color-scheme:not(.quarto-color-alternate)');
      const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
      manageTransitions('#quarto-margin-sidebar .nav-link', false);
      if (alternate) {
        // note: dark is layered on light, we don't disable primary!
        enableStylesheet(alternateStylesheets);
        for (const sheetNode of alternateStylesheets) {
          if (sheetNode.id === "quarto-bootstrap") {
            toggleBodyColorMode(sheetNode);
          }
        }
      } else {
        disableStylesheet(alternateStylesheets);
        enableStylesheet(primaryStylesheets)
        toggleBodyColorPrimary();
      }
      manageTransitions('#quarto-margin-sidebar .nav-link', true);
      // Switch the toggles
      setColorSchemeToggle(alternate)
      // Hack to workaround the fact that safari doesn't
      // properly recolor the scrollbar when toggling (#1455)
      if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
        manageTransitions("body", false);
        window.scrollTo(0, 1);
        setTimeout(() => {
          window.scrollTo(0, 0);
          manageTransitions("body", true);
        }, 40);
      }
    }
    const disableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        stylesheet.rel = 'disabled-stylesheet';
      }
    }
    const enableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        if(stylesheet.rel !== 'stylesheet') { // for Chrome, which will still FOUC without this check
          stylesheet.rel = 'stylesheet';
        }
      }
    }
    const manageTransitions = (selector, allowTransitions) => {
      const els = window.document.querySelectorAll(selector);
      for (let i=0; i < els.length; i++) {
        const el = els[i];
        if (allowTransitions) {
          el.classList.remove('notransition');
        } else {
          el.classList.add('notransition');
        }
      }
    }
    const isFileUrl = () => {
      return window.location.protocol === 'file:';
    }
    const hasAlternateSentinel = () => {
      let styleSentinel = getColorSchemeSentinel();
      if (styleSentinel !== null) {
        return styleSentinel === "alternate";
      } else {
        return false;
      }
    }
    const setStyleSentinel = (alternate) => {
      const value = alternate ? "alternate" : "default";
      if (!isFileUrl()) {
        window.localStorage.setItem("quarto-color-scheme", value);
      } else {
        localAlternateSentinel = value;
      }
    }
    const getColorSchemeSentinel = () => {
      if (!isFileUrl()) {
        const storageValue = window.localStorage.getItem("quarto-color-scheme");
        return storageValue != null ? storageValue : localAlternateSentinel;
      } else {
        return localAlternateSentinel;
      }
    }
    const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
      const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
      const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
      let newTheme = '';
      if(authorPrefersDark) {
        newTheme = isAlternate ? baseTheme : alternateTheme;
      } else {
        newTheme = isAlternate ? alternateTheme : baseTheme;
      }
      const changeGiscusTheme = () => {
        // From: https://github.com/giscus/giscus/issues/336
        const sendMessage = (message) => {
          const iframe = document.querySelector('iframe.giscus-frame');
          if (!iframe) return;
          iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
        }
        sendMessage({
          setConfig: {
            theme: newTheme
          }
        });
      }
      const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
      if (isGiscussLoaded) {
        changeGiscusTheme();
      }
    };
    const authorPrefersDark = false;
    const darkModeDefault = authorPrefersDark;
      document.querySelector('link#quarto-text-highlighting-styles.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
      document.querySelector('link#quarto-bootstrap.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
    let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
    // Dark / light mode switch
    window.quartoToggleColorScheme = () => {
      // Read the current dark / light value
      let toAlternate = !hasAlternateSentinel();
      toggleColorMode(toAlternate);
      setStyleSentinel(toAlternate);
      toggleGiscusIfUsed(toAlternate, darkModeDefault);
      window.dispatchEvent(new Event('resize'));
    };
    // Switch to dark mode if need be
    if (hasAlternateSentinel()) {
      toggleColorMode(true);
    } else {
      toggleColorMode(false);
    }
  </script>

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../src/ica/cleaning.html">In-Class Activities</a></li><li class="breadcrumb-item"><a href="../../src/ica/03-adv-ggplot-notes.html"><span class="chapter-title">3 Advanced Data Viz</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header sidebar-header-stacked">
      <a href="../../index.html" class="sidebar-logo-link">
      <img src="../../assets/sidebar-logo.png" alt="Random negative space illustration" class="sidebar-logo py-0 d-lg-inline d-none"></a>
    <div class="sidebar-title mb-0 py-0">
      <a href="../../">Nico Thorn</a> 
        <div class="sidebar-tools-main">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Welcome</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Prof Viz</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../src/pv/pv-01.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Professional Viz Sample</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">TidyTuesday</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../src/tt/hw01-tt.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Homework 01</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../src/tt/2025-07-08.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">TidyTuesday Sample 1</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../src/tt/2025-07-15.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">TidyTuesday Sample 2</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">In-Class Activities</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../src/ica/cleaning.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Cleaning SFO Weather Data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../src/ica/03-adv-ggplot-notes.html" class="sidebar-item-text sidebar-link active"><span class="chapter-title">3 Advanced Data Viz</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../src/ica/04-adv-maps-1-notes.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">4 Advanced Spatial Viz P1</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../src/ica/06-wrangling-1-notes.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">6 Adv Data wrangling P1</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../src/ica/07-wrangling-2-notes.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">7 Adv Data wrangling P2</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../src/ica/08-missing-data-notes.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">8 Missing Data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../src/ica/09-functions-notes.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">9 Functions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../src/ica/10-base-r-notes.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">10 Base R</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../src/ica/11-iteration-1-notes.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">11 Loops+Iter P1</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../src/ica/12-iteration-2-notes.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">12 Loops+Iter P2</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true">
 <span class="menu-text">Appendices</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../src/appx/appx-sample1.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Appendix Sample 1</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../src/appx/appx-sample2.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Appendix Sample 2</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../mm/mm.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Mind Maps</span></a>
  </div>
</li>
      </ul>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active" data-toc-expanded="99"><h2 id="toc-title">Table of contents</h2>
   
  <ul>
<li><a href="#learning-goals" id="toc-learning-goals" class="nav-link active" data-scroll-target="#learning-goals">🧩 Learning Goals</a></li>
  <li><a href="#introduction" id="toc-introduction" class="nav-link" data-scroll-target="#introduction">Introduction </a></li>
  <li><a href="#reading-data" id="toc-reading-data" class="nav-link" data-scroll-target="#reading-data">Reading Data</a></li>
  <li><a href="#understanding-data" id="toc-understanding-data" class="nav-link" data-scroll-target="#understanding-data">Understanding Data</a></li>
  <li><a href="#exercise-1" id="toc-exercise-1" class="nav-link" data-scroll-target="#exercise-1">Exercise 1</a></li>
  <li><a href="#exercise-2" id="toc-exercise-2" class="nav-link" data-scroll-target="#exercise-2">Exercise 2</a></li>
  <li><a href="#exercise-3" id="toc-exercise-3" class="nav-link" data-scroll-target="#exercise-3">Exercise 3</a></li>
  <li><a href="#exercise-4" id="toc-exercise-4" class="nav-link" data-scroll-target="#exercise-4">Exercise 4</a></li>
  <li><a href="#exercise-5" id="toc-exercise-5" class="nav-link" data-scroll-target="#exercise-5">Exercise 5</a></li>
  <li><a href="#exercise-6" id="toc-exercise-6" class="nav-link" data-scroll-target="#exercise-6">Exercise 6</a></li>
  <li><a href="#done" id="toc-done" class="nav-link" data-scroll-target="#done">Done!</a></li>
  </ul></nav>
    </div>
<!-- main -->
<main class="content column-body" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../src/ica/cleaning.html">In-Class Activities</a></li><li class="breadcrumb-item"><a href="../../src/ica/03-adv-ggplot-notes.html"><span class="chapter-title">3 Advanced Data Viz</span></a></li></ol></nav><div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title"><span class="chapter-title">3 Advanced Data Viz</span></h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
</div>



<div class="quarto-title-meta column-body">

    
  
    
  </div>
  


</header><section id="learning-goals" class="level2"><h2 class="anchored" data-anchor-id="learning-goals">🧩 Learning Goals</h2>
<p>By the end of this lesson, you should be able to:</p>
<ul>
<li>Navigate <a href="https://ggplot2.tidyverse.org/reference/"><code>ggplot2</code> reference page</a> to find needed functions for a desired visualization</li>
<li>Navigate the different sections of a function help page to construct desired plot features, in particular,
<ul>
<li>Navigate the <strong>Usage</strong> section to identify arguments that must be set</li>
<li>Navigate the <strong>Arguments</strong> section to understand how arguments work</li>
<li>Navigate the <strong>Aesthetics</strong> section to learn how plot appearance can be controlled</li>
<li>Navigate the <strong>Examples</strong> section for some usage examples</li>
</ul>
</li>
<li>Identify when to use different <code>data</code> arguments within <code>ggplot()</code> and <code>geom_()</code> layers</li>
</ul></section><section id="introduction" class="level2"><h2 class="anchored" data-anchor-id="introduction">Introduction <a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>
</h2>
<p>In this lesson, we are going to recreate <a href="https://www.nytimes.com/interactive/2016/02/19/us/2015-year-in-weather-temperature-precipitation.html">NYTimes 2015 Temperature Visualization (html)</a> using data from San Francisco (SFO) in 2011.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="https://hash-mac.github.io/stat212site-f25/images/sfo_nytimes.jpg" class="img-fluid figure-img"></p>
<figcaption>Screenshot of NYTimes 2015 Temperature Visualization</figcaption></figure>
</div>
</section><section id="reading-data" class="level2"><h2 class="anchored" data-anchor-id="reading-data">Reading Data</h2>
<p>Run the code chunk below to load the <code>tidyverse</code> package and read in the San Francisco weather data.</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2"></a>weather <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"https://mac-stat.github.io/data/sfo_weather.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="understanding-data" class="level2"><h2 class="anchored" data-anchor-id="understanding-data">Understanding Data</h2>
<p>Below is the codebook of the data. Familiarize yourself with the meaning of each variable. Use the codebook as a reference when using the data.</p>
<ul>
<li>
<code>Month</code>: Month of the year (1-12)</li>
<li>
<code>Day</code>: Day within the month (1-31)</li>
<li>
<code>Low</code>/<code>High</code>: Low/high temperature this day</li>
<li>
<code>NormalLow</code>/<code>NormalHigh</code>: Typical low/high temperature for this day of the year</li>
<li>
<code>RecordLow</code>/<code>RecordHigh</code>: Record low/high temperature for this day of the year</li>
<li>
<code>LowYr</code>/<code>HighYr</code>: Year in which the record low/high was observed</li>
<li>
<code>Precip</code>: Amount of precipitation (inches) this day</li>
<li>
<code>RecordPrecip</code>: Record amount of precipitation for this day of the year</li>
<li>
<code>PrecipYr</code>: Year in which the record precipitation was observed</li>
<li>
<code>date</code>: The actual date in 2011 for this day in YYYY-MM-DD format</li>
<li>
<code>dateInYear</code>: What day of the year is it? (1-365)</li>
<li>
<code>Record</code>: Logical (TRUE/FALSE) indicating whether this day had a high temperature record</li>
<li>
<code>RecordText</code>: Text that displays the record high for this day (<code>"Record high: ##"</code>)</li>
<li>
<code>RecordP</code>: Logical (TRUE/FALSE) indicating whether this day had a precipitation record</li>
<li>
<code>CulmPrec</code>: Cumulative precipitation for the month up to this day</li>
</ul></section><section id="exercise-1" class="level2"><h2 class="anchored" data-anchor-id="exercise-1">Exercise 1</h2>
<p>Examine the <a href="https://www.nytimes.com/interactive/2016/02/19/us/2015-year-in-weather-temperature-precipitation.html">NYTimes 2015 Temperature Visualization (html)</a> then answer the following questions.</p>
<p><strong>Data Storytelling</strong></p>
<ul>
<li>Relate the intro paragraph: “Scientists declared that 2015 was Earth’s hottest year on record…” to the <em>design</em> of the visualization. In particular, based on the intro paragraph,
<ul>
<li>What key message/claim does NYTimes want readers to be able to explore?</li>
<li>How did this goal inform what information is displayed in the visualization?</li>
</ul>
</li>
</ul>
<p><strong>Aesthetic Mapping</strong></p>
<ul>
<li>What specific variables (from the data codebook) underlie the visualization?</li>
<li>How do these variables map to aesthetics of the visual elements, eg, position, size, shape, and color of glyphs?</li>
</ul></section><section id="exercise-2" class="level2"><h2 class="anchored" data-anchor-id="exercise-2">Exercise 2</h2>
<p>Navigate the <strong>Geoms</strong> section of the <a href="https://ggplot2.tidyverse.org/reference/">ggplot2 reference page</a> to find a <code>geom</code> that corresponds to the visual elements in the temperature plot. Using both the small thumbnail visuals on the right and the names of the <code>geom</code>’s, brainstorm some possibilities for <code>geom</code>’s you might use to recreate the temperature visualization.</p>
<div class="callout callout-style-default callout-note callout-titled" title="Navigating Documentation / Reference Pages">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Navigating Documentation / Reference Pages
</div>
</div>
<div class="callout-body-container callout-body">
<p>You need to navigate the <code>geom</code>s further by opening up their reference pages to understand if a particular <code>geom</code> is suitable for our task. Let’s look at the <a href="https://ggplot2.tidyverse.org/reference/geom_point.html"><code>geom_point</code> documentation page</a> to learn how to read a documentation page..</p>
<p>The <strong>Usage</strong> section shows all of the possible inputs (arguments) to the <code>geom</code>. These are all of the ways that a <code>geom</code> can be customized. Just looking at the argument names can help give a hint as to what arguments might fit our needs.</p>
<p>The <strong>Arguments</strong> section, on the other hand, explains in detail what each argument does and the possible values the argument can take. The <code>mapping</code>, <code>data</code>, and <code>...</code> arguments will be the most commonly used by far.</p>
<ul>
<li>
<code>mapping</code> is the argument that is being used when we specify which variables should link or map to the plot <code>aes</code>thetics (the code inside <code>aes()</code>).</li>
<li>
<code>data</code> is the argument where we specify the dataset containing the variables that the <code>geom</code> is using.</li>
<li>
<code>...</code> is used for fixed aesthetics (ones that don’t correspond to a variable), eg, to set the color of all points, we use <code>color = "red"</code> and to set the size of all points, we use <code>size = 3</code>.</li>
</ul>
<p>The <strong>Aesthetics</strong> section of a <code>geom</code> documentation page gives information on how the visual elements of the <code>geom</code> correspond to data. For example, the <a href="https://ggplot2.tidyverse.org/reference/geom_point.html"><code>geom_point</code> documentation page</a> shows that <code>x</code> and <code>y</code> aesthetics are available. It also shows some new aesthetics like <code>stroke</code>.</p>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled" title="`data` Argument">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<code>data</code> Argument
</div>
</div>
<div class="callout-body-container callout-body">
<p>Previously you have used one dataset per plot by specifying that as the first argument of <code>ggplot()</code>. However, multiple data sets can be passed into ggplot as shown in the example below.</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="fu">data</span>(diamonds)</span>
<span id="cb2-2"><a href="#cb2-2"></a></span>
<span id="cb2-3"><a href="#cb2-3"></a>diamonds_avg_price <span class="ot">&lt;-</span> diamonds <span class="sc">|&gt;</span></span>
<span id="cb2-4"><a href="#cb2-4"></a>  <span class="fu">group_by</span>(carat) <span class="sc">|&gt;</span></span>
<span id="cb2-5"><a href="#cb2-5"></a>  <span class="fu">summarize</span>(<span class="at">avg_price =</span> <span class="fu">mean</span>(price)) <span class="sc">|&gt;</span></span>
<span id="cb2-6"><a href="#cb2-6"></a>  <span class="fu">arrange</span>(carat)</span>
<span id="cb2-7"><a href="#cb2-7"></a>diamonds_avg_price <span class="ot">&lt;-</span> diamonds_avg_price[<span class="fu">seq</span>(<span class="dv">1</span>, <span class="fu">nrow</span>(diamonds_avg_price), <span class="dv">3</span>), ]</span>
<span id="cb2-8"><a href="#cb2-8"></a></span>
<span id="cb2-9"><a href="#cb2-9"></a><span class="fu">ggplot</span>(diamonds, <span class="fu">aes</span>(<span class="at">x =</span> carat, <span class="at">y =</span> price)) <span class="sc">+</span></span>
<span id="cb2-10"><a href="#cb2-10"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb2-11"><a href="#cb2-11"></a>  <span class="fu">geom_point</span>(</span>
<span id="cb2-12"><a href="#cb2-12"></a>    <span class="at">data =</span> diamonds_avg_price,</span>
<span id="cb2-13"><a href="#cb2-13"></a>    <span class="fu">aes</span>(<span class="at">x =</span> carat, <span class="at">y =</span> avg_price),</span>
<span id="cb2-14"><a href="#cb2-14"></a>    <span class="at">color =</span> <span class="st">"deepskyblue"</span>,</span>
<span id="cb2-15"><a href="#cb2-15"></a>    <span class="at">size =</span> <span class="dv">3</span></span>
<span id="cb2-16"><a href="#cb2-16"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="03-adv-ggplot-notes_files/figure-html/diamonds_scatter-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
<p>Look at the <a href="https://ggplot2.tidyverse.org/reference/geom_linerange.html"><code>geom_linerange</code> documentation page</a> and start off your temperature visualization with the record lows and highs. Your plot should look like the one below. The hex code of the used light tan color is <code>#ECEBE3</code>.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="https://hash-mac.github.io/stat212site-f25/images/sfo_first_graph.png" class="img-fluid figure-img"></p>
<figcaption>SFO Weather Records in 2011</figcaption></figure>
</div>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a><span class="fu">ggplot</span>(weather, <span class="fu">aes</span>(<span class="at">x =</span> dateInYear, <span class="at">ymin =</span> RecordLow, <span class="at">ymax =</span> RecordHigh)) <span class="sc">+</span></span>
<span id="cb3-2"><a href="#cb3-2"></a>  <span class="fu">geom_linerange</span>(<span class="at">color =</span> <span class="st">"#ECEBE3"</span>)<span class="sc">+</span></span>
<span id="cb3-3"><a href="#cb3-3"></a>    <span class="fu">theme_classic</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="03-adv-ggplot-notes_files/figure-html/weather_plot_temp_records-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled" title="Keyboard Shortcuts">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Keyboard Shortcuts
</div>
</div>
<div class="callout-body-container callout-body">
<p>As you work on this plot, try to use some new <a href="https://hash-mac.github.io/stat212site-f25/notes/keyboard.html">keyboard shortcuts</a>. Focus on the following:</p>
<ul>
<li>Insert code chunk: <code>Ctrl+Alt+I</code> (Windows). <code>Option+Command+I</code> (Mac).</li>
<li>Run current code chunk: <code>Ctrl+Shift+Enter</code> (Windows). <code>Command+Shift+Return</code> (Mac).</li>
<li>Run current line/currently selected lines: <code>Ctrl+Enter</code> (Windows). <code>Command+Return</code> (Mac).</li>
</ul>
</div>
</div>
</section><section id="exercise-3" class="level2"><h2 class="anchored" data-anchor-id="exercise-3">Exercise 3</h2>
<p>In your visualization, also display the usual temperatures (<code>NormalLow</code> and <code>NormalHigh</code>) and actual 2011 temperatures (<code>Low</code> and <code>High</code>). Your plot should look like the one below. The hex code of the color used for the usual temperatures is <code>"#C8B8BA"</code> and for the color used for actual temperatures is <code>"#A90248"</code>.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="https://hash-mac.github.io/stat212site-f25/images/sfo_second_graph.png" class="img-fluid figure-img"></p>
<figcaption>SFO observed, Average, and Record Daily Temperatures in 2011</figcaption></figure>
</div>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a><span class="fu">ggplot</span>(weather, <span class="fu">aes</span>(<span class="at">x =</span> dateInYear, <span class="at">ymin =</span> RecordLow, <span class="at">ymax =</span> RecordHigh)) <span class="sc">+</span></span>
<span id="cb4-2"><a href="#cb4-2"></a>  <span class="fu">geom_linerange</span>(<span class="at">color =</span> <span class="st">"#ECEBE3"</span>)<span class="sc">+</span></span>
<span id="cb4-3"><a href="#cb4-3"></a>  <span class="fu">geom_ribbon</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> NormalLow, <span class="at">ymax =</span> NormalHigh), <span class="at">fill =</span> <span class="st">"#C8B8BA"</span>)<span class="sc">+</span></span>
<span id="cb4-4"><a href="#cb4-4"></a>  <span class="fu">geom_linerange</span>(<span class="fu">aes</span>(<span class="at">ymax=</span> High, <span class="at">ymin =</span> Low), <span class="at">color =</span> <span class="st">"#A90248"</span>, <span class="at">linewidth =</span><span class="fl">0.75</span>)<span class="sc">+</span></span>
<span id="cb4-5"><a href="#cb4-5"></a>  <span class="fu">theme_classic</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="03-adv-ggplot-notes_files/figure-html/weather_plot_temp_all-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled" title="Finer Control">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Finer Control
</div>
</div>
<div class="callout-body-container callout-body">
<p>If you’d like finer control of the width of these lines/rectangles, check out the <a href="https://ggplot2.tidyverse.org/reference/geom_tile.html"><code>geom_rect</code> documentation page</a>.</p>
</div>
</div>
</section><section id="exercise-4" class="level2"><h2 class="anchored" data-anchor-id="exercise-4">Exercise 4</h2>
<p>Recreate the visual demarcations of the months by adding vertical lines separating the months. Brainstorm how we might draw those vertical lines. What <code>geom</code> might we use? What subset of the data might we use in that <code>geom</code> layer to draw lines only at the month divisions?</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a>first_of_month <span class="ot">&lt;-</span> weather <span class="sc">%&gt;%</span> </span>
<span id="cb5-2"><a href="#cb5-2"></a>  <span class="fu">filter</span>(Day <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb5-3"><a href="#cb5-3"></a>  <span class="fu">select</span>(dateInYear)</span>
<span id="cb5-4"><a href="#cb5-4"></a></span>
<span id="cb5-5"><a href="#cb5-5"></a>first_of_month <span class="ot">&lt;-</span> <span class="fu">pull</span>(first_of_month)</span>
<span id="cb5-6"><a href="#cb5-6"></a></span>
<span id="cb5-7"><a href="#cb5-7"></a>fifteen_of_each_month <span class="ot">&lt;-</span> weather <span class="sc">%&gt;%</span> </span>
<span id="cb5-8"><a href="#cb5-8"></a>  <span class="fu">filter</span>(Day <span class="sc">==</span> <span class="dv">15</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb5-9"><a href="#cb5-9"></a>  <span class="fu">select</span>(dateInYear)</span>
<span id="cb5-10"><a href="#cb5-10"></a></span>
<span id="cb5-11"><a href="#cb5-11"></a>fifteen_of_each_month <span class="ot">&lt;-</span> <span class="fu">pull</span>(fifteen_of_each_month)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a><span class="fu">ggplot</span>(weather, <span class="fu">aes</span>(<span class="at">x =</span> dateInYear, <span class="at">ymin =</span> RecordLow, <span class="at">ymax =</span> RecordHigh)) <span class="sc">+</span></span>
<span id="cb6-2"><a href="#cb6-2"></a>  <span class="fu">geom_linerange</span>(<span class="at">color =</span> <span class="st">"#ECEBE3"</span>, <span class="at">linewidth =</span> <span class="fl">0.85</span>)<span class="sc">+</span></span>
<span id="cb6-3"><a href="#cb6-3"></a>  <span class="fu">geom_ribbon</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> NormalLow, <span class="at">ymax =</span> NormalHigh), <span class="at">fill =</span> <span class="st">"#C8B8BA"</span>)<span class="sc">+</span></span>
<span id="cb6-4"><a href="#cb6-4"></a>  <span class="fu">geom_linerange</span>(<span class="fu">aes</span>(<span class="at">ymax=</span> High, <span class="at">ymin =</span> Low), <span class="at">color =</span> <span class="st">"#A90248"</span>, <span class="at">linewidth =</span> <span class="fl">0.85</span>)<span class="sc">+</span></span>
<span id="cb6-5"><a href="#cb6-5"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> first_of_month, <span class="at">color =</span> <span class="st">"grey"</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>, <span class="at">linetype =</span><span class="st">"dashed"</span>)<span class="sc">+</span></span>
<span id="cb6-6"><a href="#cb6-6"></a>  <span class="fu">theme_classic</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="03-adv-ggplot-notes_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section><section id="exercise-5" class="level2"><h2 class="anchored" data-anchor-id="exercise-5">Exercise 5</h2>
<p>Change the x-axis labels so that the month names display in the center of each month’s slice of the plot.</p>
<div class="callout callout-style-default callout-tip callout-titled" title="Month Names">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Month Names
</div>
</div>
<div class="callout-body-container callout-body">
<p>R has built-in variables called <code>month.abb</code> and <code>month.name</code> that contain abbreviated and full month names.</p>
</div>
</div>
<p>Try to figuring out this new challenge using search engines and LLMs:</p>
<ul>
<li><p><strong>Search Engines.</strong> Use Google to search for possible solutions using the jargon that is most likely to return the most relevant results. Record search queries and your thought process in selecting which search results to look at first.</p></li>
<li><p><strong>LLMs.</strong> Use <a href="https://chat.openai.com/">ChatGPT</a> or <a href="https://gemini.google.com/">Gemini</a> with prompts that will most efficiently get you the desired results. Record the chat prompts used and output given. Evaluate the output. Do you fully understand the code generated? How can you tell that the generated code is correct?</p></li>
</ul>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a><span class="fu">ggplot</span>(weather, <span class="fu">aes</span>(<span class="at">x =</span> dateInYear, <span class="at">ymin =</span> RecordLow, <span class="at">ymax =</span> RecordHigh)) <span class="sc">+</span></span>
<span id="cb7-2"><a href="#cb7-2"></a>  <span class="fu">geom_linerange</span>(<span class="at">color =</span> <span class="st">"#ECEBE3"</span>)<span class="sc">+</span></span>
<span id="cb7-3"><a href="#cb7-3"></a>  <span class="fu">geom_ribbon</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> NormalLow, <span class="at">ymax =</span> NormalHigh), <span class="at">fill =</span> <span class="st">"#C8B8BA"</span>)<span class="sc">+</span></span>
<span id="cb7-4"><a href="#cb7-4"></a>  <span class="fu">geom_linerange</span>(<span class="fu">aes</span>(<span class="at">ymax=</span> High, <span class="at">ymin =</span> Low), <span class="at">color =</span> <span class="st">"#A90248"</span>)<span class="sc">+</span></span>
<span id="cb7-5"><a href="#cb7-5"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> first_of_month, <span class="at">color =</span> <span class="st">"grey"</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>, <span class="at">linetype =</span><span class="st">"dashed"</span>)<span class="sc">+</span></span>
<span id="cb7-6"><a href="#cb7-6"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> month.abb, <span class="at">breaks =</span> fifteen_of_each_month)<span class="sc">+</span></span>
<span id="cb7-7"><a href="#cb7-7"></a>  <span class="fu">theme_classic</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="03-adv-ggplot-notes_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section><section id="exercise-6" class="level2"><h2 class="anchored" data-anchor-id="exercise-6">Exercise 6</h2>
<p>Create a precipitation plot that looks like the following. Note that</p>
<ul>
<li>The triangles point to precipitation records–refer to the data codebook above for the <code>RecordP</code> variable.</li>
<li>The numbers on the plot indicate the total precipitation for the month–search the <code>hjust</code> and <code>vjust</code> options to adjust the alignment of the numbers.</li>
<li>The blue and tan colors hex codes are <code>"#32a3d8"</code> and <code>"#ebeae2"</code>, respectively.</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="https://hash-mac.github.io/stat212site-f25/images/sfo_third_graph.png" class="img-fluid figure-img"></p>
<figcaption>SFO Precipitation in 2011</figcaption></figure>
</div>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a>record_precp <span class="ot">&lt;-</span> weather <span class="sc">%&gt;%</span> </span>
<span id="cb8-2"><a href="#cb8-2"></a>  <span class="fu">filter</span>(RecordP <span class="sc">==</span> <span class="st">"TRUE"</span>)</span>
<span id="cb8-3"><a href="#cb8-3"></a></span>
<span id="cb8-4"><a href="#cb8-4"></a>total_precp <span class="ot">&lt;-</span> weather <span class="sc">%&gt;%</span> </span>
<span id="cb8-5"><a href="#cb8-5"></a>  <span class="fu">group_by</span>(Month) <span class="sc">%&gt;%</span> </span>
<span id="cb8-6"><a href="#cb8-6"></a>  <span class="fu">summarise</span>(<span class="at">precip_total =</span> <span class="fu">sum</span>(Precip), <span class="at">dateInYear =</span> <span class="fu">max</span>(dateInYear))</span>
<span id="cb8-7"><a href="#cb8-7"></a></span>
<span id="cb8-8"><a href="#cb8-8"></a>precip_per_day <span class="ot">&lt;-</span> weather <span class="sc">|&gt;</span></span>
<span id="cb8-9"><a href="#cb8-9"></a>  <span class="fu">select</span>(dateInYear, CulmPrec) <span class="sc">|&gt;</span> </span>
<span id="cb8-10"><a href="#cb8-10"></a>  <span class="fu">right_join</span>(total_precp)</span>
<span id="cb8-11"><a href="#cb8-11"></a></span>
<span id="cb8-12"><a href="#cb8-12"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb8-13"><a href="#cb8-13"></a>  <span class="fu">geom_area</span>(<span class="at">data =</span> weather, <span class="fu">aes</span>(<span class="at">x =</span> dateInYear, <span class="at">y =</span> CulmPrec),<span class="at">fill =</span> <span class="st">"#ebeae2"</span>, <span class="at">color =</span> <span class="st">"#32a3d8"</span>)<span class="sc">+</span></span>
<span id="cb8-14"><a href="#cb8-14"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> record_precp, <span class="fu">aes</span>(<span class="at">x=</span> dateInYear, <span class="at">y =</span> CulmPrec), <span class="at">shape =</span> <span class="dv">25</span>, <span class="at">fill =</span> <span class="st">"black"</span>, <span class="at">vjust =</span> <span class="sc">-</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb8-15"><a href="#cb8-15"></a>  <span class="fu">geom_text</span>(<span class="at">data =</span> precip_per_day, <span class="fu">aes</span>(<span class="at">x =</span> dateInYear, <span class="at">y=</span> CulmPrec, <span class="at">label =</span> precip_total), <span class="at">size =</span> <span class="fl">2.5</span>, <span class="at">vjust =</span><span class="sc">-</span><span class="fl">0.5</span>, <span class="at">hjust =</span> <span class="fl">0.85</span>)<span class="sc">+</span></span>
<span id="cb8-16"><a href="#cb8-16"></a>  <span class="fu">theme_classic</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="03-adv-ggplot-notes_files/figure-html/weather_plot_precip-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section><section id="done" class="level2"><h2 class="anchored" data-anchor-id="done">Done!</h2>
<ul>
<li>Check the ICA Instructions for how to (a) push your code to GitHub and (b) update your portfolio website</li>
</ul>


<!-- -->

</section><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><hr>
<ol>
<li id="fn1"><p>The exercise in this lesson are inspired by an assignment from the Concepts in Computing with Data course at UC Berkeley taught by Dr.&nbsp;Deborah Nolan.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol></section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    // Ensure there is a toggle, if there isn't float one in the top right
    if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
      const a = window.document.createElement('a');
      a.classList.add('top-right');
      a.classList.add('quarto-color-scheme-toggle');
      a.href = "";
      a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
      const i = window.document.createElement("i");
      i.classList.add('bi');
      a.appendChild(i);
      window.document.body.appendChild(a);
    }
    setColorSchemeToggle(hasAlternateSentinel())
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
    const viewSource = window.document.getElementById('quarto-view-source') ||
                       window.document.getElementById('quarto-code-tools-source');
    if (viewSource) {
      const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
      viewSource.addEventListener("click", function(e) {
        if (sourceUrl) {
          // rstudio viewer pane
          if (/\bcapabilities=\b/.test(window.location)) {
            window.open(sourceUrl);
          } else {
            window.location.href = sourceUrl;
          }
        } else {
          const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
          modal.show();
        }
        return false;
      });
    }
    function toggleCodeHandler(show) {
      return function(e) {
        const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
        for (let i=0; i<detailsSrc.length; i++) {
          const details = detailsSrc[i].parentElement;
          if (show) {
            details.open = true;
          } else {
            details.removeAttribute("open");
          }
        }
        const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
        const fromCls = show ? "hidden" : "unhidden";
        const toCls = show ? "unhidden" : "hidden";
        for (let i=0; i<cellCodeDivs.length; i++) {
          const codeDiv = cellCodeDivs[i];
          if (codeDiv.classList.contains(fromCls)) {
            codeDiv.classList.remove(fromCls);
            codeDiv.classList.add(toCls);
          } 
        }
        return false;
      }
    }
    const hideAllCode = window.document.getElementById("quarto-hide-all-code");
    if (hideAllCode) {
      hideAllCode.addEventListener("click", toggleCodeHandler(false));
    }
    const showAllCode = window.document.getElementById("quarto-show-all-code");
    if (showAllCode) {
      showAllCode.addEventListener("click", toggleCodeHandler(true));
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
            // target, if specified
            link.setAttribute("target", "_blank");
            if (link.getAttribute("rel") === null) {
              link.setAttribute("rel", "noopener");
            }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script><nav class="page-navigation column-body"><div class="nav-page nav-page-previous">
      <a href="../../src/ica/cleaning.html" class="pagination-link" aria-label="Cleaning SFO Weather Data">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-title">Cleaning SFO Weather Data</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../../src/ica/04-adv-maps-1-notes.html" class="pagination-link" aria-label="4 Advanced Spatial Viz P1">
        <span class="nav-page-text"><span class="chapter-title">4 Advanced Spatial Viz P1</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb9" data-shortcodes="false"><pre class="sourceCode numberSource markdown number-lines code-with-copy"><code class="sourceCode markdown"><span id="cb9-1"><a href="#cb9-1"></a><span class="co">---</span></span>
<span id="cb9-2"><a href="#cb9-2"></a><span class="an">title:</span><span class="co"> "3 Advanced Data Viz"</span></span>
<span id="cb9-3"><a href="#cb9-3"></a><span class="co">---</span></span>
<span id="cb9-4"><a href="#cb9-4"></a></span>
<span id="cb9-5"><a href="#cb9-5"></a></span>
<span id="cb9-6"><a href="#cb9-6"></a><span class="fu">## 🧩 Learning Goals</span></span>
<span id="cb9-7"><a href="#cb9-7"></a></span>
<span id="cb9-8"><a href="#cb9-8"></a>By the end of this lesson, you should be able to:</span>
<span id="cb9-9"><a href="#cb9-9"></a></span>
<span id="cb9-10"><a href="#cb9-10"></a><span class="ss">- </span>Navigate <span class="co">[</span><span class="ot">`ggplot2` reference page</span><span class="co">](https://ggplot2.tidyverse.org/reference/)</span> to find needed functions for a desired visualization</span>
<span id="cb9-11"><a href="#cb9-11"></a><span class="ss">- </span>Navigate the different sections of a function help page to construct desired plot features, in particular, </span>
<span id="cb9-12"><a href="#cb9-12"></a><span class="ss">    - </span>Navigate the **Usage** section to identify arguments that must be set</span>
<span id="cb9-13"><a href="#cb9-13"></a><span class="ss">    - </span>Navigate the **Arguments** section to understand how arguments work</span>
<span id="cb9-14"><a href="#cb9-14"></a><span class="ss">    - </span>Navigate the **Aesthetics** section to learn how plot appearance can be controlled</span>
<span id="cb9-15"><a href="#cb9-15"></a><span class="ss">    - </span>Navigate the **Examples** section for some usage examples</span>
<span id="cb9-16"><a href="#cb9-16"></a><span class="ss">- </span>Identify when to use different <span class="in">`data`</span> arguments within <span class="in">`ggplot()`</span> and <span class="in">`geom_()`</span> layers</span>
<span id="cb9-17"><a href="#cb9-17"></a></span>
<span id="cb9-18"><a href="#cb9-18"></a></span>
<span id="cb9-19"><a href="#cb9-19"></a></span>
<span id="cb9-20"><a href="#cb9-20"></a><span class="fu">## Introduction ^[The exercise in this lesson are inspired by an assignment from the Concepts in Computing with Data course at UC Berkeley taught by Dr. Deborah Nolan.]</span></span>
<span id="cb9-21"><a href="#cb9-21"></a></span>
<span id="cb9-22"><a href="#cb9-22"></a></span>
<span id="cb9-23"><a href="#cb9-23"></a>In this lesson, we are going to recreate <span class="co">[</span><span class="ot">NYTimes 2015 Temperature Visualization (html)</span><span class="co">](https://www.nytimes.com/interactive/2016/02/19/us/2015-year-in-weather-temperature-precipitation.html)</span> using data from San Francisco (SFO) in 2011.</span>
<span id="cb9-24"><a href="#cb9-24"></a></span>
<span id="cb9-25"><a href="#cb9-25"></a><span class="al">![Screenshot of NYTimes 2015 Temperature Visualization](https://hash-mac.github.io/stat212site-f25/images/sfo_nytimes.jpg)</span></span>
<span id="cb9-26"><a href="#cb9-26"></a></span>
<span id="cb9-27"><a href="#cb9-27"></a><span class="fu">## Reading Data</span></span>
<span id="cb9-28"><a href="#cb9-28"></a></span>
<span id="cb9-29"><a href="#cb9-29"></a>Run the code chunk below to load the <span class="in">`tidyverse`</span> package and read in the San Francisco weather data.</span>
<span id="cb9-30"><a href="#cb9-30"></a></span>
<span id="cb9-31"><a href="#cb9-31"></a><span class="in">```{r setup}</span></span>
<span id="cb9-32"><a href="#cb9-32"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb9-33"><a href="#cb9-33"></a>weather <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"https://mac-stat.github.io/data/sfo_weather.csv"</span>)</span>
<span id="cb9-34"><a href="#cb9-34"></a><span class="in">```</span></span>
<span id="cb9-35"><a href="#cb9-35"></a></span>
<span id="cb9-36"><a href="#cb9-36"></a><span class="fu">## Understanding Data</span></span>
<span id="cb9-37"><a href="#cb9-37"></a></span>
<span id="cb9-38"><a href="#cb9-38"></a>Below is the codebook of the data.  Familiarize yourself with the meaning of each variable.  Use the codebook as a reference when using the data.</span>
<span id="cb9-39"><a href="#cb9-39"></a></span>
<span id="cb9-40"><a href="#cb9-40"></a><span class="ss">- </span><span class="in">`Month`</span>: Month of the year (1-12)</span>
<span id="cb9-41"><a href="#cb9-41"></a><span class="ss">- </span><span class="in">`Day`</span>: Day within the month (1-31)</span>
<span id="cb9-42"><a href="#cb9-42"></a><span class="ss">- </span><span class="in">`Low`</span>/<span class="in">`High`</span>: Low/high temperature this day</span>
<span id="cb9-43"><a href="#cb9-43"></a><span class="ss">- </span><span class="in">`NormalLow`</span>/<span class="in">`NormalHigh`</span>: Typical low/high temperature for this day of the year</span>
<span id="cb9-44"><a href="#cb9-44"></a><span class="ss">- </span><span class="in">`RecordLow`</span>/<span class="in">`RecordHigh`</span>: Record low/high temperature for this day of the year</span>
<span id="cb9-45"><a href="#cb9-45"></a><span class="ss">- </span><span class="in">`LowYr`</span>/<span class="in">`HighYr`</span>: Year in which the record low/high was observed</span>
<span id="cb9-46"><a href="#cb9-46"></a><span class="ss">- </span><span class="in">`Precip`</span>: Amount of precipitation (inches) this day</span>
<span id="cb9-47"><a href="#cb9-47"></a><span class="ss">- </span><span class="in">`RecordPrecip`</span>: Record amount of precipitation for this day of the year</span>
<span id="cb9-48"><a href="#cb9-48"></a><span class="ss">- </span><span class="in">`PrecipYr`</span>: Year in which the record precipitation was observed</span>
<span id="cb9-49"><a href="#cb9-49"></a><span class="ss">- </span><span class="in">`date`</span>: The actual date in 2011 for this day in YYYY-MM-DD format</span>
<span id="cb9-50"><a href="#cb9-50"></a><span class="ss">- </span><span class="in">`dateInYear`</span>: What day of the year is it? (1-365)</span>
<span id="cb9-51"><a href="#cb9-51"></a><span class="ss">- </span><span class="in">`Record`</span>: Logical (TRUE/FALSE) indicating whether this day had a high temperature record</span>
<span id="cb9-52"><a href="#cb9-52"></a><span class="ss">- </span><span class="in">`RecordText`</span>: Text that displays the record high for this day (<span class="in">`"Record high: ##"`</span>)</span>
<span id="cb9-53"><a href="#cb9-53"></a><span class="ss">- </span><span class="in">`RecordP`</span>: Logical (TRUE/FALSE) indicating whether this day had a precipitation record</span>
<span id="cb9-54"><a href="#cb9-54"></a><span class="ss">- </span><span class="in">`CulmPrec`</span>: Cumulative precipitation for the month up to this day</span>
<span id="cb9-55"><a href="#cb9-55"></a></span>
<span id="cb9-56"><a href="#cb9-56"></a></span>
<span id="cb9-57"><a href="#cb9-57"></a></span>
<span id="cb9-58"><a href="#cb9-58"></a><span class="fu">## Exercise 1</span></span>
<span id="cb9-59"><a href="#cb9-59"></a></span>
<span id="cb9-60"><a href="#cb9-60"></a>Examine the <span class="co">[</span><span class="ot">NYTimes 2015 Temperature Visualization (html)</span><span class="co">](https://www.nytimes.com/interactive/2016/02/19/us/2015-year-in-weather-temperature-precipitation.html)</span> then answer the following questions.</span>
<span id="cb9-61"><a href="#cb9-61"></a></span>
<span id="cb9-62"><a href="#cb9-62"></a>**Data Storytelling** </span>
<span id="cb9-63"><a href="#cb9-63"></a></span>
<span id="cb9-64"><a href="#cb9-64"></a><span class="ss">- </span>Relate the intro paragraph: "Scientists declared that 2015 was Earth’s hottest year on record..." to the *design* of the visualization.  In particular, based on the intro paragraph,</span>
<span id="cb9-65"><a href="#cb9-65"></a><span class="ss">  - </span>What key message/claim does NYTimes want readers to be able to explore? </span>
<span id="cb9-66"><a href="#cb9-66"></a><span class="ss">  - </span>How did this goal inform what information is displayed in the visualization?</span>
<span id="cb9-67"><a href="#cb9-67"></a></span>
<span id="cb9-68"><a href="#cb9-68"></a>**Aesthetic Mapping** </span>
<span id="cb9-69"><a href="#cb9-69"></a></span>
<span id="cb9-70"><a href="#cb9-70"></a><span class="ss">- </span>What specific variables (from the data codebook) underlie the visualization?</span>
<span id="cb9-71"><a href="#cb9-71"></a><span class="ss">- </span>How do these variables map to aesthetics of the visual elements, eg, position, size, shape, and color of glyphs?</span>
<span id="cb9-72"><a href="#cb9-72"></a></span>
<span id="cb9-73"><a href="#cb9-73"></a></span>
<span id="cb9-74"><a href="#cb9-74"></a></span>
<span id="cb9-75"><a href="#cb9-75"></a></span>
<span id="cb9-76"><a href="#cb9-76"></a><span class="fu">## Exercise 2</span></span>
<span id="cb9-77"><a href="#cb9-77"></a></span>
<span id="cb9-78"><a href="#cb9-78"></a>Navigate the **Geoms** section of the <span class="co">[</span><span class="ot">ggplot2 reference page</span><span class="co">](https://ggplot2.tidyverse.org/reference/)</span> to find a <span class="in">`geom`</span> that corresponds to the visual elements in the temperature plot.  Using both the small thumbnail visuals on the right and the names of the <span class="in">`geom`</span>'s, brainstorm some possibilities for <span class="in">`geom`</span>'s you might use to recreate the temperature visualization.</span>
<span id="cb9-79"><a href="#cb9-79"></a></span>
<span id="cb9-80"><a href="#cb9-80"></a></span>
<span id="cb9-81"><a href="#cb9-81"></a>::: {.callout-note title="Navigating Documentation / Reference Pages"}</span>
<span id="cb9-82"><a href="#cb9-82"></a>You need to navigate the <span class="in">`geom`</span>s further by opening up their reference pages to understand if a particular <span class="in">`geom`</span> is suitable for our task. Let's look at the  <span class="co">[</span><span class="ot">`geom_point` documentation page</span><span class="co">](https://ggplot2.tidyverse.org/reference/geom_point.html)</span> to learn how to read a documentation page..</span>
<span id="cb9-83"><a href="#cb9-83"></a></span>
<span id="cb9-84"><a href="#cb9-84"></a>The **Usage** section shows all of the possible inputs (arguments) to the <span class="in">`geom`</span>.  These are all of the ways that a <span class="in">`geom`</span> can be customized. Just looking at the argument names can help give a hint as to what arguments might fit our needs.</span>
<span id="cb9-85"><a href="#cb9-85"></a></span>
<span id="cb9-86"><a href="#cb9-86"></a></span>
<span id="cb9-87"><a href="#cb9-87"></a>The **Arguments** section, on the other hand, explains in detail what each argument does and the possible values the argument can take. The <span class="in">`mapping`</span>, <span class="in">`data`</span>, and <span class="in">`...`</span> arguments will be the most commonly used by far.</span>
<span id="cb9-88"><a href="#cb9-88"></a></span>
<span id="cb9-89"><a href="#cb9-89"></a><span class="ss">- </span><span class="in">`mapping`</span> is the argument that is being used when we specify which variables should link or map to the plot <span class="in">`aes`</span>thetics (the code inside <span class="in">`aes()`</span>).</span>
<span id="cb9-90"><a href="#cb9-90"></a><span class="ss">- </span><span class="in">`data`</span> is the argument where we specify the dataset containing the variables that the <span class="in">`geom`</span> is using.</span>
<span id="cb9-91"><a href="#cb9-91"></a><span class="ss">- </span><span class="in">`...`</span> is used for fixed aesthetics (ones that don't correspond to a variable), eg, to set the color of all points, we use <span class="in">`color = "red"`</span> and to set the size of all points, we use <span class="in">`size = 3`</span>.</span>
<span id="cb9-92"><a href="#cb9-92"></a></span>
<span id="cb9-93"><a href="#cb9-93"></a>The **Aesthetics** section of a <span class="in">`geom`</span> documentation page gives information on how the visual elements of the <span class="in">`geom`</span> correspond to data. For example, the <span class="co">[</span><span class="ot">`geom_point` documentation page</span><span class="co">](https://ggplot2.tidyverse.org/reference/geom_point.html)</span> shows that <span class="in">`x`</span> and <span class="in">`y`</span> aesthetics are available. It also shows some new aesthetics like <span class="in">`stroke`</span>.</span>
<span id="cb9-94"><a href="#cb9-94"></a>:::</span>
<span id="cb9-95"><a href="#cb9-95"></a></span>
<span id="cb9-96"><a href="#cb9-96"></a>::: {.callout-note title="<span class="in">`data`</span> Argument"}</span>
<span id="cb9-97"><a href="#cb9-97"></a>Previously you have used one dataset per plot by specifying that as the first argument of <span class="in">`ggplot()`</span>. However, multiple data sets can be passed into ggplot as shown in the example below.</span>
<span id="cb9-98"><a href="#cb9-98"></a></span>
<span id="cb9-99"><a href="#cb9-99"></a><span class="in">```{r diamonds_scatter}</span></span>
<span id="cb9-100"><a href="#cb9-100"></a><span class="fu">data</span>(diamonds)</span>
<span id="cb9-101"><a href="#cb9-101"></a></span>
<span id="cb9-102"><a href="#cb9-102"></a>diamonds_avg_price <span class="ot">&lt;-</span> diamonds <span class="sc">|&gt;</span></span>
<span id="cb9-103"><a href="#cb9-103"></a>  <span class="fu">group_by</span>(carat) <span class="sc">|&gt;</span></span>
<span id="cb9-104"><a href="#cb9-104"></a>  <span class="fu">summarize</span>(<span class="at">avg_price =</span> <span class="fu">mean</span>(price)) <span class="sc">|&gt;</span></span>
<span id="cb9-105"><a href="#cb9-105"></a>  <span class="fu">arrange</span>(carat)</span>
<span id="cb9-106"><a href="#cb9-106"></a>diamonds_avg_price <span class="ot">&lt;-</span> diamonds_avg_price[<span class="fu">seq</span>(<span class="dv">1</span>, <span class="fu">nrow</span>(diamonds_avg_price), <span class="dv">3</span>), ]</span>
<span id="cb9-107"><a href="#cb9-107"></a></span>
<span id="cb9-108"><a href="#cb9-108"></a><span class="fu">ggplot</span>(diamonds, <span class="fu">aes</span>(<span class="at">x =</span> carat, <span class="at">y =</span> price)) <span class="sc">+</span></span>
<span id="cb9-109"><a href="#cb9-109"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb9-110"><a href="#cb9-110"></a>  <span class="fu">geom_point</span>(</span>
<span id="cb9-111"><a href="#cb9-111"></a>    <span class="at">data =</span> diamonds_avg_price,</span>
<span id="cb9-112"><a href="#cb9-112"></a>    <span class="fu">aes</span>(<span class="at">x =</span> carat, <span class="at">y =</span> avg_price),</span>
<span id="cb9-113"><a href="#cb9-113"></a>    <span class="at">color =</span> <span class="st">"deepskyblue"</span>,</span>
<span id="cb9-114"><a href="#cb9-114"></a>    <span class="at">size =</span> <span class="dv">3</span></span>
<span id="cb9-115"><a href="#cb9-115"></a>  )</span>
<span id="cb9-116"><a href="#cb9-116"></a><span class="in">```</span></span>
<span id="cb9-117"><a href="#cb9-117"></a></span>
<span id="cb9-118"><a href="#cb9-118"></a>:::</span>
<span id="cb9-119"><a href="#cb9-119"></a></span>
<span id="cb9-120"><a href="#cb9-120"></a></span>
<span id="cb9-121"><a href="#cb9-121"></a>Look at the <span class="co">[</span><span class="ot">`geom_linerange` documentation page</span><span class="co">](https://ggplot2.tidyverse.org/reference/geom_linerange.html)</span> and start off your temperature visualization with the record lows and highs.  Your plot should look like the one below.  The hex code of the used light tan color is <span class="in">`#ECEBE3`</span>.</span>
<span id="cb9-122"><a href="#cb9-122"></a></span>
<span id="cb9-123"><a href="#cb9-123"></a><span class="al">![SFO Weather Records in 2011](https://hash-mac.github.io/stat212site-f25/images/sfo_first_graph.png)</span></span>
<span id="cb9-124"><a href="#cb9-124"></a></span>
<span id="cb9-125"><a href="#cb9-125"></a><span class="in">```{r weather_plot_temp_records}</span></span>
<span id="cb9-126"><a href="#cb9-126"></a><span class="fu">ggplot</span>(weather, <span class="fu">aes</span>(<span class="at">x =</span> dateInYear, <span class="at">ymin =</span> RecordLow, <span class="at">ymax =</span> RecordHigh)) <span class="sc">+</span></span>
<span id="cb9-127"><a href="#cb9-127"></a>  <span class="fu">geom_linerange</span>(<span class="at">color =</span> <span class="st">"#ECEBE3"</span>)<span class="sc">+</span></span>
<span id="cb9-128"><a href="#cb9-128"></a>    <span class="fu">theme_classic</span>()</span>
<span id="cb9-129"><a href="#cb9-129"></a><span class="in">```</span></span>
<span id="cb9-130"><a href="#cb9-130"></a></span>
<span id="cb9-131"><a href="#cb9-131"></a>::: {.callout-tip title="Keyboard Shortcuts"}</span>
<span id="cb9-132"><a href="#cb9-132"></a>As you work on this plot, try to use some new <span class="co">[</span><span class="ot">keyboard shortcuts</span><span class="co">](https://hash-mac.github.io/stat212site-f25/notes/keyboard.html)</span>. Focus on the following:</span>
<span id="cb9-133"><a href="#cb9-133"></a></span>
<span id="cb9-134"><a href="#cb9-134"></a><span class="ss">- </span>Insert code chunk: <span class="in">`Ctrl+Alt+I`</span> (Windows). <span class="in">`Option+Command+I`</span> (Mac).</span>
<span id="cb9-135"><a href="#cb9-135"></a><span class="ss">- </span>Run current code chunk: <span class="in">`Ctrl+Shift+Enter`</span> (Windows). <span class="in">`Command+Shift+Return`</span> (Mac).</span>
<span id="cb9-136"><a href="#cb9-136"></a><span class="ss">- </span>Run current line/currently selected lines: <span class="in">`Ctrl+Enter`</span> (Windows). <span class="in">`Command+Return`</span> (Mac).</span>
<span id="cb9-137"><a href="#cb9-137"></a>:::</span>
<span id="cb9-138"><a href="#cb9-138"></a></span>
<span id="cb9-139"><a href="#cb9-139"></a></span>
<span id="cb9-140"><a href="#cb9-140"></a></span>
<span id="cb9-141"><a href="#cb9-141"></a></span>
<span id="cb9-142"><a href="#cb9-142"></a></span>
<span id="cb9-143"><a href="#cb9-143"></a><span class="fu">## Exercise 3</span></span>
<span id="cb9-144"><a href="#cb9-144"></a></span>
<span id="cb9-145"><a href="#cb9-145"></a>In your visualization, also display the usual temperatures (<span class="in">`NormalLow`</span> and <span class="in">`NormalHigh`</span>) and actual 2011 temperatures (<span class="in">`Low`</span> and <span class="in">`High`</span>). Your plot should look like the one below. The hex code of the color used for the usual temperatures is <span class="in">`"#C8B8BA"`</span> and for the color used for actual temperatures is <span class="in">`"#A90248"`</span>.</span>
<span id="cb9-146"><a href="#cb9-146"></a></span>
<span id="cb9-147"><a href="#cb9-147"></a><span class="al">![SFO observed, Average, and Record Daily Temperatures in 2011](https://hash-mac.github.io/stat212site-f25/images/sfo_second_graph.png)</span></span>
<span id="cb9-148"><a href="#cb9-148"></a></span>
<span id="cb9-149"><a href="#cb9-149"></a><span class="in">```{r weather_plot_temp_all}</span></span>
<span id="cb9-150"><a href="#cb9-150"></a><span class="fu">ggplot</span>(weather, <span class="fu">aes</span>(<span class="at">x =</span> dateInYear, <span class="at">ymin =</span> RecordLow, <span class="at">ymax =</span> RecordHigh)) <span class="sc">+</span></span>
<span id="cb9-151"><a href="#cb9-151"></a>  <span class="fu">geom_linerange</span>(<span class="at">color =</span> <span class="st">"#ECEBE3"</span>)<span class="sc">+</span></span>
<span id="cb9-152"><a href="#cb9-152"></a>  <span class="fu">geom_ribbon</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> NormalLow, <span class="at">ymax =</span> NormalHigh), <span class="at">fill =</span> <span class="st">"#C8B8BA"</span>)<span class="sc">+</span></span>
<span id="cb9-153"><a href="#cb9-153"></a>  <span class="fu">geom_linerange</span>(<span class="fu">aes</span>(<span class="at">ymax=</span> High, <span class="at">ymin =</span> Low), <span class="at">color =</span> <span class="st">"#A90248"</span>, <span class="at">linewidth =</span><span class="fl">0.75</span>)<span class="sc">+</span></span>
<span id="cb9-154"><a href="#cb9-154"></a>  <span class="fu">theme_classic</span>()</span>
<span id="cb9-155"><a href="#cb9-155"></a></span>
<span id="cb9-156"><a href="#cb9-156"></a><span class="in">```</span></span>
<span id="cb9-157"><a href="#cb9-157"></a></span>
<span id="cb9-158"><a href="#cb9-158"></a></span>
<span id="cb9-159"><a href="#cb9-159"></a>::: {.callout-tip title="Finer Control"}</span>
<span id="cb9-160"><a href="#cb9-160"></a>If you'd like finer control of the width of these lines/rectangles, check out the <span class="co">[</span><span class="ot">`geom_rect` documentation page</span><span class="co">](https://ggplot2.tidyverse.org/reference/geom_tile.html)</span>.</span>
<span id="cb9-161"><a href="#cb9-161"></a>:::</span>
<span id="cb9-162"><a href="#cb9-162"></a></span>
<span id="cb9-163"><a href="#cb9-163"></a></span>
<span id="cb9-164"><a href="#cb9-164"></a><span class="fu">## Exercise 4</span></span>
<span id="cb9-165"><a href="#cb9-165"></a></span>
<span id="cb9-166"><a href="#cb9-166"></a>Recreate the visual demarcations of the months by adding vertical lines separating the months.  Brainstorm how we might draw those vertical lines. What <span class="in">`geom`</span> might we use?  What subset of the data might we use in that <span class="in">`geom`</span> layer to draw lines only at the month divisions? </span>
<span id="cb9-167"><a href="#cb9-167"></a></span>
<span id="cb9-170"><a href="#cb9-170"></a><span class="in">```{r}</span></span>
<span id="cb9-171"><a href="#cb9-171"></a>first_of_month <span class="ot">&lt;-</span> weather <span class="sc">%&gt;%</span> </span>
<span id="cb9-172"><a href="#cb9-172"></a>  <span class="fu">filter</span>(Day <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb9-173"><a href="#cb9-173"></a>  <span class="fu">select</span>(dateInYear)</span>
<span id="cb9-174"><a href="#cb9-174"></a></span>
<span id="cb9-175"><a href="#cb9-175"></a>first_of_month <span class="ot">&lt;-</span> <span class="fu">pull</span>(first_of_month)</span>
<span id="cb9-176"><a href="#cb9-176"></a></span>
<span id="cb9-177"><a href="#cb9-177"></a>fifteen_of_each_month <span class="ot">&lt;-</span> weather <span class="sc">%&gt;%</span> </span>
<span id="cb9-178"><a href="#cb9-178"></a>  <span class="fu">filter</span>(Day <span class="sc">==</span> <span class="dv">15</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb9-179"><a href="#cb9-179"></a>  <span class="fu">select</span>(dateInYear)</span>
<span id="cb9-180"><a href="#cb9-180"></a></span>
<span id="cb9-181"><a href="#cb9-181"></a>fifteen_of_each_month <span class="ot">&lt;-</span> <span class="fu">pull</span>(fifteen_of_each_month)</span>
<span id="cb9-182"><a href="#cb9-182"></a><span class="in">```</span></span>
<span id="cb9-183"><a href="#cb9-183"></a></span>
<span id="cb9-186"><a href="#cb9-186"></a><span class="in">```{r}</span></span>
<span id="cb9-187"><a href="#cb9-187"></a><span class="fu">ggplot</span>(weather, <span class="fu">aes</span>(<span class="at">x =</span> dateInYear, <span class="at">ymin =</span> RecordLow, <span class="at">ymax =</span> RecordHigh)) <span class="sc">+</span></span>
<span id="cb9-188"><a href="#cb9-188"></a>  <span class="fu">geom_linerange</span>(<span class="at">color =</span> <span class="st">"#ECEBE3"</span>, <span class="at">linewidth =</span> <span class="fl">0.85</span>)<span class="sc">+</span></span>
<span id="cb9-189"><a href="#cb9-189"></a>  <span class="fu">geom_ribbon</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> NormalLow, <span class="at">ymax =</span> NormalHigh), <span class="at">fill =</span> <span class="st">"#C8B8BA"</span>)<span class="sc">+</span></span>
<span id="cb9-190"><a href="#cb9-190"></a>  <span class="fu">geom_linerange</span>(<span class="fu">aes</span>(<span class="at">ymax=</span> High, <span class="at">ymin =</span> Low), <span class="at">color =</span> <span class="st">"#A90248"</span>, <span class="at">linewidth =</span> <span class="fl">0.85</span>)<span class="sc">+</span></span>
<span id="cb9-191"><a href="#cb9-191"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> first_of_month, <span class="at">color =</span> <span class="st">"grey"</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>, <span class="at">linetype =</span><span class="st">"dashed"</span>)<span class="sc">+</span></span>
<span id="cb9-192"><a href="#cb9-192"></a>  <span class="fu">theme_classic</span>()</span>
<span id="cb9-193"><a href="#cb9-193"></a></span>
<span id="cb9-194"><a href="#cb9-194"></a><span class="in">```</span></span>
<span id="cb9-195"><a href="#cb9-195"></a></span>
<span id="cb9-196"><a href="#cb9-196"></a></span>
<span id="cb9-197"><a href="#cb9-197"></a></span>
<span id="cb9-198"><a href="#cb9-198"></a><span class="fu">## Exercise 5</span></span>
<span id="cb9-199"><a href="#cb9-199"></a></span>
<span id="cb9-200"><a href="#cb9-200"></a>Change the x-axis labels so that the month names display in the center of each month's slice of the plot. </span>
<span id="cb9-201"><a href="#cb9-201"></a></span>
<span id="cb9-202"><a href="#cb9-202"></a>::: {.callout-tip title="Month Names"}</span>
<span id="cb9-203"><a href="#cb9-203"></a>R has built-in variables called <span class="in">`month.abb`</span> and <span class="in">`month.name`</span> that contain abbreviated and full month names.</span>
<span id="cb9-204"><a href="#cb9-204"></a>:::</span>
<span id="cb9-205"><a href="#cb9-205"></a></span>
<span id="cb9-206"><a href="#cb9-206"></a></span>
<span id="cb9-207"><a href="#cb9-207"></a>Try to figuring out this new challenge using search engines and LLMs:</span>
<span id="cb9-208"><a href="#cb9-208"></a></span>
<span id="cb9-209"><a href="#cb9-209"></a><span class="ss">- </span>**Search Engines.** Use Google to search for possible solutions using the jargon that is most likely to return the most relevant results. Record search queries and your thought process in selecting which search results to look at first.</span>
<span id="cb9-210"><a href="#cb9-210"></a></span>
<span id="cb9-211"><a href="#cb9-211"></a><span class="ss">- </span>**LLMs.** Use <span class="co">[</span><span class="ot">ChatGPT</span><span class="co">](https://chat.openai.com/)</span> or <span class="co">[</span><span class="ot">Gemini</span><span class="co">](https://gemini.google.com/)</span> with prompts that will most efficiently get you the desired results. Record the chat prompts used and output given. Evaluate the output. Do you fully understand the code generated? How can you tell that the generated code is correct?</span>
<span id="cb9-212"><a href="#cb9-212"></a></span>
<span id="cb9-213"><a href="#cb9-213"></a></span>
<span id="cb9-216"><a href="#cb9-216"></a><span class="in">```{r}</span></span>
<span id="cb9-217"><a href="#cb9-217"></a><span class="fu">ggplot</span>(weather, <span class="fu">aes</span>(<span class="at">x =</span> dateInYear, <span class="at">ymin =</span> RecordLow, <span class="at">ymax =</span> RecordHigh)) <span class="sc">+</span></span>
<span id="cb9-218"><a href="#cb9-218"></a>  <span class="fu">geom_linerange</span>(<span class="at">color =</span> <span class="st">"#ECEBE3"</span>)<span class="sc">+</span></span>
<span id="cb9-219"><a href="#cb9-219"></a>  <span class="fu">geom_ribbon</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> NormalLow, <span class="at">ymax =</span> NormalHigh), <span class="at">fill =</span> <span class="st">"#C8B8BA"</span>)<span class="sc">+</span></span>
<span id="cb9-220"><a href="#cb9-220"></a>  <span class="fu">geom_linerange</span>(<span class="fu">aes</span>(<span class="at">ymax=</span> High, <span class="at">ymin =</span> Low), <span class="at">color =</span> <span class="st">"#A90248"</span>)<span class="sc">+</span></span>
<span id="cb9-221"><a href="#cb9-221"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> first_of_month, <span class="at">color =</span> <span class="st">"grey"</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>, <span class="at">linetype =</span><span class="st">"dashed"</span>)<span class="sc">+</span></span>
<span id="cb9-222"><a href="#cb9-222"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> month.abb, <span class="at">breaks =</span> fifteen_of_each_month)<span class="sc">+</span></span>
<span id="cb9-223"><a href="#cb9-223"></a>  <span class="fu">theme_classic</span>()</span>
<span id="cb9-224"><a href="#cb9-224"></a><span class="in">```</span></span>
<span id="cb9-225"><a href="#cb9-225"></a></span>
<span id="cb9-226"><a href="#cb9-226"></a></span>
<span id="cb9-227"><a href="#cb9-227"></a><span class="fu">## Exercise 6 </span></span>
<span id="cb9-228"><a href="#cb9-228"></a></span>
<span id="cb9-229"><a href="#cb9-229"></a>Create a precipitation plot that looks like the following.  Note that </span>
<span id="cb9-230"><a href="#cb9-230"></a></span>
<span id="cb9-231"><a href="#cb9-231"></a><span class="ss">- </span>The triangles point to precipitation records--refer to the data codebook above for the <span class="in">`RecordP`</span> variable.</span>
<span id="cb9-232"><a href="#cb9-232"></a><span class="ss">- </span>The numbers on the plot indicate the total precipitation for the month--search the <span class="in">`hjust`</span> and <span class="in">`vjust`</span> options to adjust the alignment of the numbers.</span>
<span id="cb9-233"><a href="#cb9-233"></a><span class="ss">- </span>The blue and tan colors hex codes are <span class="in">`"#32a3d8"`</span> and <span class="in">`"#ebeae2"`</span>, respectively.</span>
<span id="cb9-234"><a href="#cb9-234"></a></span>
<span id="cb9-235"><a href="#cb9-235"></a><span class="al">![SFO Precipitation in 2011](https://hash-mac.github.io/stat212site-f25/images/sfo_third_graph.png)</span></span>
<span id="cb9-236"><a href="#cb9-236"></a></span>
<span id="cb9-237"><a href="#cb9-237"></a></span>
<span id="cb9-238"><a href="#cb9-238"></a><span class="in">```{r weather_plot_precip}</span></span>
<span id="cb9-239"><a href="#cb9-239"></a>record_precp <span class="ot">&lt;-</span> weather <span class="sc">%&gt;%</span> </span>
<span id="cb9-240"><a href="#cb9-240"></a>  <span class="fu">filter</span>(RecordP <span class="sc">==</span> <span class="st">"TRUE"</span>)</span>
<span id="cb9-241"><a href="#cb9-241"></a></span>
<span id="cb9-242"><a href="#cb9-242"></a>total_precp <span class="ot">&lt;-</span> weather <span class="sc">%&gt;%</span> </span>
<span id="cb9-243"><a href="#cb9-243"></a>  <span class="fu">group_by</span>(Month) <span class="sc">%&gt;%</span> </span>
<span id="cb9-244"><a href="#cb9-244"></a>  <span class="fu">summarise</span>(<span class="at">precip_total =</span> <span class="fu">sum</span>(Precip), <span class="at">dateInYear =</span> <span class="fu">max</span>(dateInYear))</span>
<span id="cb9-245"><a href="#cb9-245"></a></span>
<span id="cb9-246"><a href="#cb9-246"></a>precip_per_day <span class="ot">&lt;-</span> weather <span class="sc">|&gt;</span></span>
<span id="cb9-247"><a href="#cb9-247"></a>  <span class="fu">select</span>(dateInYear, CulmPrec) <span class="sc">|&gt;</span> </span>
<span id="cb9-248"><a href="#cb9-248"></a>  <span class="fu">right_join</span>(total_precp)</span>
<span id="cb9-249"><a href="#cb9-249"></a></span>
<span id="cb9-250"><a href="#cb9-250"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb9-251"><a href="#cb9-251"></a>  <span class="fu">geom_area</span>(<span class="at">data =</span> weather, <span class="fu">aes</span>(<span class="at">x =</span> dateInYear, <span class="at">y =</span> CulmPrec),<span class="at">fill =</span> <span class="st">"#ebeae2"</span>, <span class="at">color =</span> <span class="st">"#32a3d8"</span>)<span class="sc">+</span></span>
<span id="cb9-252"><a href="#cb9-252"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> record_precp, <span class="fu">aes</span>(<span class="at">x=</span> dateInYear, <span class="at">y =</span> CulmPrec), <span class="at">shape =</span> <span class="dv">25</span>, <span class="at">fill =</span> <span class="st">"black"</span>, <span class="at">vjust =</span> <span class="sc">-</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb9-253"><a href="#cb9-253"></a>  <span class="fu">geom_text</span>(<span class="at">data =</span> precip_per_day, <span class="fu">aes</span>(<span class="at">x =</span> dateInYear, <span class="at">y=</span> CulmPrec, <span class="at">label =</span> precip_total), <span class="at">size =</span> <span class="fl">2.5</span>, <span class="at">vjust =</span><span class="sc">-</span><span class="fl">0.5</span>, <span class="at">hjust =</span> <span class="fl">0.85</span>)<span class="sc">+</span></span>
<span id="cb9-254"><a href="#cb9-254"></a>  <span class="fu">theme_classic</span>()</span>
<span id="cb9-255"><a href="#cb9-255"></a><span class="in">```</span></span>
<span id="cb9-256"><a href="#cb9-256"></a><span class="fu">## Done!</span></span>
<span id="cb9-257"><a href="#cb9-257"></a></span>
<span id="cb9-258"><a href="#cb9-258"></a><span class="ss">- </span>Check the ICA Instructions for how to (a) push your code to GitHub and (b) update your portfolio website</span>
</code><button title="Copy to Clipboard" class="code-copy-button" data-in-quarto-modal=""><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">

<div class="cookie-consent-footer"><a href="#" id="open_preferences_center">Cookie Preferences</a></div></div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>


<script src="../../site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>